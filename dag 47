# Day 47 â€“ documenting tool-choice logic in code

from typing import Dict, Tuple


def normalize(text: str) -> str:
    return (text or "").strip().lower()


def recommend_tool(case: Dict) -> Tuple[str, str]:
    """
    Input:
      - type: 'ekstern' eller 'intern'
      - hastegrad: 'lav' / 'middel' / 'hÃ¸j'
      - kompleksitet: 'lav' / 'middel' / 'hÃ¸j' (valgfri, default 'middel')

    Output:
      - tool: 'Make' / 'Zapier' / 'Microsoft'
      - reason: kort forklaring
    """
    case_type = normalize(case.get("type"))
    hastegrad = normalize(case.get("hastegrad"))
    kompleksitet = normalize(case.get("kompleksitet", "middel"))

    # 1) Microsoft (Power Automate / M365) nÃ¥r der er stÃ¦rk intern Microsoft-kontekst
    #    -> typisk interne processer, SharePoint, Teams, Outlook, Forms
    if case_type == "intern":
        return (
            "Microsoft",
            "Intern proces: passer naturligt til M365 (Teams/SharePoint/Outlook/Forms) og governance.",
        )

    # 2) Make nÃ¥r der er eksterne inputs + hÃ¸j kompleksitet/orkestrering
    #    -> webhooks, routing, flere systemer, datastrukturering
    if case_type == "ekstern" and (kompleksitet == "hÃ¸j" or hastegrad == "hÃ¸j"):
        return (
            "Make",
            "Ekstern sag med hÃ¸j orkestrering: stÃ¦rk til webhooks, avanceret routing og datatransformation.",
        )

    # 3) Zapier til hurtige, standardiserede workflows (lav/middel kompleksitet)
    return (
        "Zapier",
        "Standard workflow: hurtig opsÃ¦tning, stabil drift og gode integrationer til simple automatiseringer.",
    )


def pretty_case(case: Dict) -> str:
    return (
        f"type={case.get('type')} | hastegrad={case.get('hastegrad')} | "
        f"kompleksitet={case.get('kompleksitet', 'middel')}"
    )


def main() -> None:
    # Input: type af sag (ekstern/intern/hastegrad)
    cases = [
        {"type": "intern", "hastegrad": "middel", "kompleksitet": "middel"},
        {"type": "ekstern", "hastegrad": "lav", "kompleksitet": "lav"},
        {"type": "ekstern", "hastegrad": "hÃ¸j", "kompleksitet": "middel"},
        {"type": "ekstern", "hastegrad": "middel", "kompleksitet": "hÃ¸j"},
    ]

    print("\nğŸ§­ Dag 47 â€“ Beslutningslogik i kode\n")

    for i, case in enumerate(cases, start=1):
        tool, reason = recommend_tool(case)
        print(f"Sag {i} ({pretty_case(case)})")
        print(f"â†’ Anbefaling: Brug {tool}")
        print(f"â†’ Hvorfor: {reason}\n")


if __name__ == "__main__":
    main()
