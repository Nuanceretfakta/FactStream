# Day 39 â€“ form data validation (Python)

ALLOWED_AFDELINGER = {"HR", "IT", "Ã˜konomi", "Andet"}


def validate(entry: dict) -> tuple[bool, list[str]]:
    """
    Validates a single form entry.
    Returns (is_valid, list_of_errors)
    """
    errors = []

    navn = entry.get("navn", "").strip()
    afdeling = entry.get("afdeling", "").strip()
    emne = entry.get("emne", "").strip()
    beskrivelse = entry.get("beskrivelse", "").strip()

    if not navn:
        errors.append("navn mangler")

    if afdeling not in ALLOWED_AFDELINGER:
        errors.append(f"afdeling ugyldig ({afdeling})")

    if not emne:
        errors.append("emne mangler")

    if len(beskrivelse) < 10:
        errors.append("beskrivelse for kort (<10 tegn)")

    return len(errors) == 0, errors


def main():
    # 5 fake indsendelser (som fra en formular)
    submissions = [
        {
            "navn": "Anna",
            "afdeling": "HR",
            "emne": "LÃ¸n",
            "beskrivelse": "SpÃ¸rgsmÃ¥l om lÃ¸nregulering",
            "email": "anna@firma.dk",
        },
        {
            "navn": "",
            "afdeling": "IT",
            "emne": "Computer",
            "beskrivelse": "Min pc virker ikke",
        },
        {
            "navn": "Mads",
            "afdeling": "Salg",
            "emne": "Adgang",
            "beskrivelse": "Mangler adgang",
        },
        {
            "navn": "Sara",
            "afdeling": "Ã˜konomi",
            "emne": "",
            "beskrivelse": "Budget for nÃ¦ste kvartal er uklart",
        },
        {
            "navn": "Jonas",
            "afdeling": "Andet",
            "emne": "Ferie",
            "beskrivelse": "Ferie",
        },
    ]

    print("\nðŸ“‹ Dag 39 â€“ Datavalidering\n")

    for i, entry in enumerate(submissions, start=1):
        is_valid, errors = validate(entry)

        if is_valid:
            print(f"{i}. VALID")
        else:
            print(f"{i}. INVALID â†’ {', '.join(errors)}")


if __name__ == "__main__":
    main()
