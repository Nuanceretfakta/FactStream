"""
Day 48 â€“ Decision logic as documentation

This script documents how an organization chooses between
Make, Zapier, or Microsoft automation tools.

Purpose:
- Make architecture decisions explicit and explainable
- Ensure consistent tool choice across teams
- Serve as shared reference logic for automation design

The code is intentionally simple and readable.
"""

from typing import Dict, Tuple


def normalize(text: str) -> str:
    """Normalize free-text input for stable comparisons."""
    return (text or "").strip().lower()


def recommend_tool(case: Dict) -> Tuple[str, str]:
    """
    Recommends which automation tool to use based on case characteristics.

    Input (case dict):
      - type: 'ekstern' or 'intern'
      - hastegrad: 'lav' / 'middel' / 'hÃ¸j'
      - kompleksitet: 'lav' / 'middel' / 'hÃ¸j' (optional)

    Output:
      - tool name
      - short explanation
    """

    case_type = normalize(case.get("type"))
    hastegrad = normalize(case.get("hastegrad"))
    kompleksitet = normalize(case.get("kompleksitet", "middel"))

    # Intern logik:
    # Interne processer bÃ¸r holdes i Microsoft-universet
    # for governance, sikkerhed og M365-integration.
    if case_type == "intern":
        return (
            "Microsoft",
            "Intern proces â€“ passer bedst til M365 (Teams, SharePoint, Outlook).",
        )

    # Ekstern logik:
    # Eksterne sager med hÃ¸j hast eller kompleksitet krÃ¦ver
    # fleksibel routing, webhooks og datatransformation.
    if case_type == "ekstern" and (hastegrad == "hÃ¸j" or kompleksitet == "hÃ¸j"):
        return (
            "Make",
            "Ekstern sag med hÃ¸j kompleksitet eller hast â€“ krÃ¦ver avanceret orkestrering.",
        )

    # Standardvalg:
    # Hurtige, stabile workflows uden speciallogik.
    return (
        "Zapier",
        "Standard workflow â€“ hurtig opsÃ¦tning og stabil drift.",
    )


def main() -> None:
    # Eksempler pÃ¥ sager (kun til demonstration / dokumentation)
    cases = [
        {"type": "intern", "hastegrad": "middel", "kompleksitet": "middel"},
        {"type": "ekstern", "hastegrad": "lav", "kompleksitet": "lav"},
        {"type": "ekstern", "hastegrad": "hÃ¸j", "kompleksitet": "middel"},
    ]

    print("\nğŸ“˜ Dag 48 â€“ Beslutningslogik med dokumentation\n")

    for i, case in enumerate(cases, start=1):
        tool, reason = recommend_tool(case)
        print(f"Sag {i} â†’ Brug {tool}")
        print(f"Forklaring: {reason}\n")


if __name__ == "__main__":
    main()
